{"pageProps":{"note":{"id":"e363cde0-76cb-4f3b-91c9-7709ebbbc04f","title":"Pihole","desc":"","updated":1614422739147,"created":1613900690739,"custom":{},"fname":"app.pihole","type":"note","vault":{"fsPath":".","name":"vault","selfContained":true},"contentHash":"35478ac467e678bb22be94ab89388d5a","links":[],"anchors":{"pihole":{"type":"header","text":"PiHole","value":"pihole","line":8,"column":0,"depth":1},"running-in-docker":{"type":"header","text":"Running in Docker","value":"running-in-docker","line":10,"column":0,"depth":2},"solve-dns-resolution-in-other-containers-when-using-pihole-in-docker":{"type":"header","text":"Solve DNS resolution in other containers when using PiHole in Docker","value":"solve-dns-resolution-in-other-containers-when-using-pihole-in-docker","line":52,"column":0,"depth":2},"adding-custom-dns-entries":{"type":"header","text":"Adding custom DNS entries","value":"adding-custom-dns-entries","line":58,"column":0,"depth":2},"whitelist-the-following-on-this-url":{"type":"header","text":"Whitelist the following on this URL","value":"whitelist-the-following-on-this-url","line":68,"column":0,"depth":2},"blacklist-the-following-optional":{"type":"header","text":"Blacklist the following (optional)","value":"blacklist-the-following-optional","line":71,"column":0,"depth":2},"seeing-lots-of-queries-for-lb_dns-sd_udpip_addressin-addrarpa":{"type":"header","text":"Seeing lots of queries for lb._dns-sd._udp.<IP_ADDRESS>.in-addr.arpa","value":"seeing-lots-of-queries-for-lb_dns-sd_udpip_addressin-addrarpa","line":78,"column":0,"depth":2}},"children":[],"parent":"ced683be-fe67-4022-989f-abc6d311cb3a","data":{}},"body":"<h1 id=\"pihole\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#pihole\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Pihole</h1>\n<h1 id=\"pihole-1\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#pihole-1\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>PiHole</h1>\n<h2 id=\"running-in-docker\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#running-in-docker\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Running in Docker</h2>\n<pre class=\"language-sh\"><code class=\"language-sh\">## Create persistent volumes\ndocker volume create pihole\ndocker volume create dnsmasq\n\n## Pull the armv7 build (https://hub.docker.com/layers/pihole/pihole/latest/images/sha256-6f8e902adb26cf10220763d1ab027b0b2c64e2df3a397e4f015ead7a1c40d96c?context=explore) - doing this as --platform linux/arm/v7 could not find image, despite it being on DockerHub\ndocker pull pihole/pihole@sha256:6f8e902adb26cf10220763d1ab027b0b2c64e2df3a397e4f015ead7a1c40d96c\n\n## Docker tag \ndocker tag 1b529812cd4b pihole/pihole:armv7\n\n## Run pihole\ndocker run -d \\\n--name=pihole \\\n-e TZ=Europe/London \\\n-e WEBPASSWORD=YOURPASS \\\n-e ServerIP=YOUR.SERVER.IP \\\n-v pihole:/etc/pihole \\\n-v dnsmasq:/etc/dnsmasq.d \\\n-p 80:80 \\\n-p 192.168.208.102:53:53/tcp \\\n-p 192.168.208.102:53:53/udp \\\n--restart=unless-stopped \\\npihole/pihole:armv7\n\n## e.g.\n\ndocker run -d \\\n--name=pihole \\\n-e TZ=Europe/London \\\n-e WEBPASSWORD=change_this_password \\\n-e ServerIP=192.168.208.102 \\\n-v pihole:/etc/pihole \\\n-v dnsmasq:/etc/dnsmasq.d \\\n-p 80:80 \\\n-p 192.168.208.102:53:53/tcp \\\n-p 192.168.208.102:53:53/udp \\\n--restart=unless-stopped \\\npihole/pihole:armv7\n</code></pre>\n<h2 id=\"solve-dns-resolution-in-other-containers-when-using-pihole-in-docker\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#solve-dns-resolution-in-other-containers-when-using-pihole-in-docker\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Solve DNS resolution in other containers when using PiHole in Docker</h2>\n<p>Found that when using wireguard in docker on the the same docker host as pihole.\nwireguard could not correctly use pihole.\nThis is solved in the the following link:\n<em><a href=\"https://discourse.pi-hole.net/t/solve-dns-resolution-in-other-containers-when-using-docker-pihole/31413/2\">https://discourse.pi-hole.net/t/solve-dns-resolution-in-other-containers-when-using-docker-pihole/31413/2</a></em></p>\n<h2 id=\"adding-custom-dns-entries\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#adding-custom-dns-entries\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Adding custom DNS entries</h2>\n<p>Write a file ending in <code>.conf</code> in the dnsmasq folder - defautls to <code>/etc/dnsmasq.d</code>\nThe file should have the following syntax:</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">host-record=mydomain.duckdns.org,192.168.1.10\naddress=/printer.lan/192.168.2.9\n</code></pre>\n<p>After making changes, run th follwing to restart the pihole dns\n<code>pihole restartdns</code></p>\n<h2 id=\"whitelist-the-following-on-this-url\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#whitelist-the-following-on-this-url\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Whitelist the following on this URL</h2>\n<p><em><a href=\"https://discourse.pi-hole.net/t/commonly-whitelisted-domains/212\">https://discourse.pi-hole.net/t/commonly-whitelisted-domains/212</a></em></p>\n<h2 id=\"blacklist-the-following-optional\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#blacklist-the-following-optional\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Blacklist the following (optional)</h2>\n<p>Based on <code>/u/AtariDump</code> reddit comment <a href=\"https://www.reddit.com/r/pihole/comments/jtr6eb/default_adlists/\">https://www.reddit.com/r/pihole/comments/jtr6eb/default_adlists/</a>\n<code>/u/Wally3K</code> <a href=\"https://firebog.net/\">https://firebog.net/</a>\n<code>/u/LightSwitch05</code> <a href=\"https://www.github.developerdan.com/hosts/\">https://www.github.developerdan.com/hosts/</a>\nRegex list: <a href=\"https://github.com/mmotti/pihole-regex/blob/master/regex.list\">https://github.com/mmotti/pihole-regex/blob/master/regex.list</a></p>\n<h2 id=\"seeing-lots-of-queries-for-lb_dns-sd_udpip_addressin-addrarpa\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#seeing-lots-of-queries-for-lb_dns-sd_udpip_addressin-addrarpa\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Seeing lots of queries for lb._dns-sd._udp.&#x3C;IP_ADDRESS>.in-addr.arpa</h2>\n<p><em><a href=\"https://github.com/pi-hole/pi-hole/issues/2654\">https://github.com/pi-hole/pi-hole/issues/2654</a></em></p>","noteIndex":{"id":"root","title":"root","desc":"","updated":1595961348801,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","name":"vault","selfContained":true},"contentHash":"dad9815845eec627c937e34281a065d5","links":[],"anchors":{"root":{"type":"header","text":"Root","value":"root","line":8,"column":0,"depth":1}},"children":["ced683be-fe67-4022-989f-abc6d311cb3a","132fe0fe-fc74-4dbe-982a-9dcac677f664","a44df307-1a67-417b-b733-da109c3be441","b9686e84-d9a1-4dbb-8474-1a9c156d6d12","93a5dc42-8663-4d3c-924f-82e8faa35a67","f80d45a1-bd90-4097-96bc-0301fbc4d937","19992660-3602-4c64-a3a5-e9c05f19ffac","3f157f98-5c61-4479-b311-956d4b0ef67a"],"parent":null,"data":{},"body":"\n# Root\n\nThis is the root fo your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top. \n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":true,"bubbleUpCreateNew":true,"vaultSelectionModeOnCreate":"smart","fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{}},"workspace":{"vaults":[{"fsPath":".","name":"vault","selfContained":true}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.87.3","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/dendron-notes","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://jackyhui96.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"Dendron Notes","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitLab","editBranch":"main","editViewMode":"tree"},"enablePrettyLinks":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}